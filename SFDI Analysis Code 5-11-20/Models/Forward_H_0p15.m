function [y1] = Forward_H_0p15(x1)
%FORWARD_H_0P15 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 09-Apr-2020 00:55:15.
% 
% [y1] = Forward_H_0p15(x1) takes these arguments:
%   x = 2xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0.200000002980232];
x1_step1.gain = [4;0.294117647187726];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.4979935136206070645;-1.2719350176778407846;-1.5149771369972775403;-1.0770083884589054524;-0.68918355129958175365;0.083054922002289768845;-0.9563762424190418443;-0.41429717306227836771;-2.6920973746794096826;-3.3973447992815364316];
IW1_1 = [1.2595189168699960636 -1.3493291706996282109;1.6280210741141447617 0.65041054786217367134;0.28050087127817113775 2.0221470535273802227;0.39798274398434158039 -4.299873600638893123;1.4130059818579918662 -0.68426778592404680079;0.5313004796105190719 -1.0699044385035181293;-2.3187105281161044523 -0.79008890224491412635;-1.0577968278477276609 -0.75594572726054742873;-0.83315654796453408881 -2.026560429027063126;-2.5138829251780996366 3.2720835625709447925];

% Layer 2
b2 = [-1.7272723531628444427;-1.2476454425952623328;0.97283936728014241968;0.51606096080266339321;0.35602232452200044399;-0.32949100453060636839;-1.1504059203223722108;0.84886116550814316728;1.5266213980416911689;1.7849037782664332052];
LW2_1 = [0.75303474453560348412 -0.015921118454080881999 0.83867897741688313129 -1.0856716086484174966 0.1952174441247696568 -0.53933834657376189536 0.27641792783729324245 1.2988325775288989128 -0.17881137139302105687 0.35510376243991081946;0.31852617237416741558 -0.15400224501546352918 0.15353829079025618776 0.53935001045417185761 -0.16041738913011027723 -0.99834226291586869451 -0.11157612257321031235 0.8952210356733704133 -0.40716931896178909511 -0.029173033658759266878;-0.49738063047728142685 0.32046626469013800298 0.76323252909407957034 0.13612199987475273599 -0.85700314645602992947 -0.52820270062374241604 -0.20125316493550993169 -0.41393563607530192705 0.078549302618156721656 0.066357718165909032604;-0.85064908695299101815 -0.042658488625634184699 -0.17649990072860008428 0.051450477553842674516 -0.052238790288029551823 -0.42447398921156692664 0.13298487005651543624 0.56854271882135287708 0.64015687574786617198 -0.008132327177422300768;-0.1568532765651975136 -0.6311391393437136843 -0.83987569546273888044 0.46317620875469694974 0.56905095085320478443 0.21253173014744902725 0.34518026748441305029 0.33611006577621860281 0.32811071204593889039 0.32987412330699611429;-0.18788548183608927422 0.26035527924100432262 1.1334266339291545478 -0.33982502318542001651 -0.52036743987440103876 0.17067013292665533797 0.24091100965806164225 -1.141350036997274886 -0.96092045122049574157 0.054449860966490758185;-0.089251216963916676916 -0.36269767003996361554 -0.6914032021019504981 0.26373773296856595216 0.59918964255802642516 -1.2959634775927753036 6.8522343443231433641e-05 0.33411712081293754029 -1.012127587571717946 0.018113950787554372601;0.37979897880368368446 -0.46027458003083165927 -0.13280507033519567406 0.3293142833046850404 -0.40074474370255575018 0.88407394923189153157 0.054052915064428913583 -1.4955507853611991198 -1.0862548398911147096 0.010586214184018586867;0.7221795915753680406 0.74735495457367340233 0.50982708508346652465 0.96610265314830234828 -0.30358653835178739389 -0.071560095084267957843 -0.6320367049061240694 -0.20800167570259311955 -0.70712554526888038442 -0.17386910088476104086;1.1170094916793653628 0.0017084875891199367143 -0.46907362842303057526 1.1755099648909974608 -0.26672018545651288157 0.85096581061849652095 0.052701196775580681775 0.04742931031143505366 -0.17820474684826351219 -0.20986145968020819552];

% Layer 3
b3 = [1.6453752805399080028;1.6288624404285876324;0.77210470388887875171;0.047103862020664293009;-0.059186681572024023301;0.37062219904455012687;-0.6334871079951346351;1.0717631223349604053;-0.72456817053965993924;1.5801707851967359275];
LW3_2 = [-0.086116627095458531116 -0.2184706283139209726 0.4962603322312971188 -0.42206663763089397046 -0.27082887533734789631 0.92292244764011777125 0.67907540801834531674 -0.5232638383945125149 -0.12303125843263865158 -0.089295244745838331379;-1.0394297387266731025 -0.42396969157410657747 -0.13582383780589679656 0.10710588210751359473 -0.87847182093980191731 0.23894259075871976394 0.19131737632348488898 0.69456599068739233171 -0.85801135387384075415 -0.30077906160247830369;-1.5482464075543478366 -0.87747473079452897871 -0.21837241844667040769 -0.7033594805973302222 -0.21508493528704655806 0.22856077261881935225 1.0348691344751417276 -0.33322978630046085069 -0.53259181874544403446 0.34082115323199990709;-0.14840098269941012776 -0.40860853734177454699 0.0070578058258908725128 -0.56517457977177565365 -0.56378480620595328165 0.55158972096129044171 -0.88586642291012629435 -0.67155818934965694211 -0.5201089128289144714 -0.8662937279712353833;0.96156487054768269296 0.94902001720378970084 0.65165296628554758573 0.31230409841434569884 -0.12472177830031566659 0.2400736754670451667 0.3649258274437588434 -1.384882363868102706 -0.47407560986836233541 0.66836173580179270015;0.39603976410719438084 -1.4959217284403723003 0.037941828292384176258 -0.58094466676835532226 0.39060216858072199786 -0.68355128437553513976 -0.077106603066117621048 -0.41013630797572264708 0.11616189825563499882 -0.052818815196055489414;0.065097093579391807072 0.64881491272998892406 -0.86468446763657769161 -0.56394996706007283205 0.38746295337568659178 0.59306119418720171232 -0.30029928317491688672 -0.41266149882598818222 -0.94221577666225608816 -0.52962342730082212494;-0.028414166097597996774 -0.9489544954707215263 -1.2256254463957474421 0.45375637182423700366 -0.54336180053521443423 0.3825576329357623373 -1.676689790490944354 0.1428521117044474209 -0.96250145538743525631 0.19090536811236008541;-1.2337715775769637627 -0.91705381930372087407 0.011143806675947488111 -0.50241332746015965327 -0.37454401071331683282 0.35227201336660607378 -0.17024600038682685677 -0.821504603317959603 -0.28919204775787327177 0.5362262234378751824;0.68358355076605759049 -0.75608797991542708861 0.1429362962721094088 -0.77173355120825259945 -1.0079632686013226817 0.16932063517376283457 -0.58455547010876007796 -0.12601925017323517553 0.34229037528764433285 -0.85701245120420654899];

% Layer 4
b4 = 0.70032167080789298197;
LW4_3 = [0.76411005676660614938 0.50072161709242568595 -0.62392608251015346799 -0.032413599105338225526 1.8845736790535640992 -0.36182121073867451466 -0.67312958360072483455 0.11030008350954137453 -0.49301544241576794603 0.0051215477237283538875];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 2.87656005922418;
y1_step1.xoffset = 0.00729411048814654;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = repmat(b4,1,Q) + LW4_3*a3;

% Output 1
y1 = mapminmax_reverse(a4,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
