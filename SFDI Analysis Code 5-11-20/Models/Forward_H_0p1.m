function [y1] = Forward_H_0p1(x1)
%FORWARD_H_0P1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 09-Apr-2020 00:54:02.
% 
% [y1] = Forward_H_0p1(x1) takes these arguments:
%   x = 2xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0.200000002980232];
x1_step1.gain = [4;0.294117647187726];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.528795427186227851;-3.5259695289862449386;-2.3227574206338501561;1.4473905381440568263;0.60666308898345877587;0.29115615560577146059;1.1667015993970215604;3.0534053197329535934;3.1332684821466179059;3.4450788374545449066];
IW1_1 = [2.0304699219883786121 3.8685816935958472484;3.3396898445426312918 2.0524615034733093566;-0.5300966492352275905 3.0393751161026600904;-1.1807403084394145765 1.63058117239218614;-1.7086562045653355124 -2.2050658290047366883;1.3287436382413375657 -2.0941066447173741771;2.033282831370249788 2.2840149750066411904;2.9498420350967564652 0.76296013215426605747;2.9191898285278670144 -2.0511495138583804021;0.11570620369073734979 3.5007313812317990553];

% Layer 2
b2 = [1.7739615480514290269;-1.6647063127205283806;0.98235656877430588274;-0.70170677110586121561;-0.38853920366334843139;0.35710892456493603664;-1.422098948027397336;-0.98081108773665803824;-1.4590615987430421985;-1.8383161581890259395];
LW2_1 = [-0.58650283294419836011 0.15437044898757398825 0.049636067026841666772 -0.24911287616205035622 -0.61325564737411475402 -0.48905089268270190983 0.13278296324010371854 0.45550173020776918431 -1.5403853944306487023 0.58806044509752797289;-0.23627431162164147516 -0.53556683669981774987 1.2932448619391032629 0.4986619270920850111 -0.66100540051290357368 0.50024263651714517831 0.42006994092537602858 -1.518393157968897178 -0.34616213770423992502 -0.44366506680822453967;-0.51707723478042988408 -0.51404962706129886385 0.60644211626053956543 -1.0006161249557452564 0.25783741057962267229 -1.0880602077922341131 -0.5006552502568587526 0.10850607824008083602 -0.38637745621426422549 -0.53496046060944746348;0.37067006278117742291 0.044855585968178006417 -0.44372458026390704244 0.37265835983260153785 -0.43844443008594291555 0.68750000833952396029 -0.45572300905957724426 0.042102894419089459399 0.76651928856886075714 0.75830062182515378666;-0.1004885917993266764 -0.13159793164379646191 -0.71592298502862627974 -0.59180437001345376213 0.50860723005218888559 -0.92759880288209661803 0.30591491311184099144 -0.95003141085624509543 -0.53121795676232064221 -0.36170486188938605343;0.25580134101135382219 -0.23828698920116181403 0.68572089821537418608 -0.020249112481574339101 0.23303642886881695273 -0.34619283432007541546 -0.33486383765716493111 0.29013946924052935739 -0.23934988911502441677 0.69190470166701989463;-0.051434149598687597948 0.14357120382705584882 0.29733300740368345805 1.3422964529829355396 0.025900438826051662422 -0.12159276059525465918 -0.13004873406694825166 -0.52694982647514643226 -0.24228543317791900735 -0.42354624191616208062;-0.46400750586371142248 -0.25132363987809136496 -0.61514011505964572013 -0.64178597125416114721 0.20982911220824271292 0.74140003772224460921 -0.23291184674796502896 0.082523473191564097884 -0.67205510862132911143 -0.62518136781219113551;-0.23018921928522795284 0.36156931814745196796 0.52708687675417220664 -0.039334275891613250387 -0.88019068388045518248 0.19097153564773319823 -0.27588177491062437774 0.77802120419115050609 -0.42290771192821147162 -0.69596410305786071682;-0.22873194479932634771 0.40366013839549996778 0.45630753624171915828 0.95640540184187194939 0.60951609781008209143 -0.70570039924098315609 -0.3212001473622530523 -0.21617850853701131575 0.23866482528249802209 -0.31412993659225846299];

% Layer 3
b3 = [1.8466073849151762865;1.249750795680676374;-0.95108518347028225826;-0.4546202844581402891;-0.24334696167313679682;0.031602602259131452878;-0.73011707863194308388;0.92853604309460091581;1.3516261257505368665;-1.7181247787764528656];
LW3_2 = [-0.54966266467774893556 -0.050242523330756426458 0.35668104031372177554 -0.18127902448893737364 -0.67745826691197597036 -0.59909507014630714039 1.3859364631743358309 1.0270557992066668973 -0.41845716980234765048 0.20506573500312341718;-0.30853387991417596803 -0.17629905763279468678 -0.19556187754137191459 -0.30096790077872381808 -0.57397190577993950633 -0.84708438179660361378 0.37717935141226999196 -0.037185445166152526764 0.30724349636117787021 0.0028250350963138488695;0.08965081793915215258 -0.55463395936293247157 -0.4028157342086308712 -0.0986877263821705486 0.52664380728316473324 -0.95107666320235528801 -0.37767995504207957369 0.65946689962463334034 -0.20708353085436939645 0.079988879745487725947;0.35973250005934120921 0.4160572908944883963 0.1916088042280751913 -0.84773198006838290652 0.71683358375363304127 -0.4856226534495398095 1.2384635722635894961 -0.57358923785405668827 0.6466247363535403414 0.72876495067045909959;0.58743279454561869724 0.33442115663105037582 -0.300796602052124884 0.99517533659661960854 0.96028531640731551455 0.43714778425953643159 -0.51625300161886344963 0.27660959466463463929 0.95573844583954914444 -0.59811310774170578508;0.78339167931104225495 1.4587600811532017708 -0.27818565988850635362 0.31805583110087676246 0.74123371639739554784 -0.28779111519098843353 0.58834380798241747712 -0.64187385448653366815 -0.024537771248414323721 -0.17332941402416157661;-0.87995822158367376087 -0.42702842193377993363 0.79808221984442806463 -0.6004069792277343387 0.61464975750756689621 -0.32690283435295497405 1.0053731935586180946 -0.052906332180563633849 -0.12924273158893131996 0.5504705905505851149;1.0628785209275639634 0.99898490723588551088 -0.16085827117200710012 -0.061056855415962917044 0.024627821394877104366 0.23826076225105102813 0.71111641668660596771 -1.1224049269692766284 0.32291214178439431315 -0.07734538637963637997;0.27690220781525010096 0.47133387988947528235 -0.62088987261941663842 -0.34587227627286903919 0.76789860505726426076 -0.52185577308448982681 -0.30389996392210788523 -0.0086003704773519578514 -0.75621997217896697041 0.71336076879957621699;-0.22480299366845038489 0.82478615329603688355 -0.60180929006025651873 0.71352348545381072409 -0.43597166282752225497 1.075107430032481437 -0.091074097292232647494 -1.074135103549417769 -0.094017943850795371308 -0.037186394383240388428];

% Layer 4
b4 = 0.53133449188354264781;
LW4_3 = [0.77785327686658245483 -0.63742442838221402557 -0.53814301432776845413 0.75726744206326546127 -0.38059300957085362427 0.77486837194267055295 -0.22569235793237543697 0.53019736304979092623 0.38725137665512682217 0.2007179460510432889];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 2.57176202453436;
y1_step1.xoffset = 0.0132708633318543;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = repmat(b4,1,Q) + LW4_3*a3;

% Output 1
y1 = mapminmax_reverse(a4,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
