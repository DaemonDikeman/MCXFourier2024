function [Y,Xf,Af] = Anet(X,~,~)
%ANET neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 11-May-2020 01:20:38.
% 
% [Y] = Anet(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 25xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.0391866868141032;0.089883552853406;0.148668234391502;0.180610754861803;0.164040503414206;0.0300088838066364;0.0499420318586939;0.0592110734360629;0.0623636613713008;0.0574267723719201;0.0200330108047782;0.0252608596281223;0.0273555071290816;0.0276321711404872;0.0267144311398485;0.0147649603461921;0.0173023880551384;0.0181594354498719;0.0183712820435701;0.017812972538399;0.0116327051649664;0.0132562959180277;0.0137957496463881;0.0139411130099663;0.0135232039836685];
x1_step1.gain = [2.50046629621834;2.40796708423531;2.56541728008838;2.73295864954721;2.80154426998186;2.82659184303548;2.82207363031447;2.83971589979396;2.89099924288754;2.90055247606345;3.43205275661485;3.45455150488564;3.46371104401792;3.40847320550128;3.42657181788508;4.22980412852809;4.18628053588836;4.15588667672734;4.16550266276618;4.21261425636442;5.08526324692415;5.0935566865347;5.12495132963148;5.09651780712194;5.1368503718636];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.76405385215488252904;-0.25801131016856360123;0.10693272970122251475;-0.063254259976993992831;-0.26648250729428590855;2.1456258939481203107;1.0793875328243698331;0.48577659452407151441;0.80852557583776396566;-0.29807158374281433888];
IW1_1 = [0.097179810421101950335 0.12938265485862976423 0.043898257809315124889 0.1923465725770738266 0.55299650623687435225 -0.28820347936802159783 -0.31376870526326477995 -0.13288565787317832556 0.065073583661106548792 0.46452889176065664811 -0.33275408753055024658 -0.03352734550848730094 -0.089904945455965085133 -0.0087750847543645194709 0.17808179019637801477 -0.0383473445903866339 -0.0065660838545375911982 -0.053012776495017371881 -0.035188195696700307058 -0.10273290265913707919 0.0800109083459488446 -0.010438496783654317018 -0.02826754955143237838 -0.054233339237961440682 -0.1411017478139314496;0.024004163592622924928 -0.34340995529082235516 -0.55457705097160303609 -0.49300650629390851964 -0.27140840554385148309 0.24742977455369133399 -0.12393214712687243562 -0.087614161416733588039 -0.36309609292906575018 -0.52058551213416015546 0.55017051635995950498 0.29147012065970206995 0.25055764863748458682 0.0042273536496852245556 -0.42450101557534963836 0.79504939804734808817 0.42958037378146596286 0.27705432272038660324 0.039497558002298441271 -0.39796854625525113214 0.71217230129770092706 0.30172472964524277295 0.15097472339998099788 -0.20085690105166242869 -0.34258554883144415326;0.33190474468217995296 0.40744535383058688716 0.37676329464651470147 0.056368667716540366008 -0.25937736770729491464 0.2633230567741293715 0.1903366548979183448 -0.18099209730661366957 -0.053094138793826045619 0.067178209923464252129 -0.048546972389834776307 -0.25101686555775964971 -0.36798109650376886748 -0.28669419653346495114 0.26850493719989737551 -0.42830780307677457364 -0.34815227883249427743 -0.36877203370360295276 -0.18924715156697963225 0.1141575025236797325 -0.34578580367015088193 -0.30326358623801485948 -0.15350681091922363519 0.12492171464585835605 -0.11855635643164091908;0.19947220081172808981 -0.58235169673060738216 -0.6580546117811592044 -0.7240907884246088333 0.45086543667856049389 -0.43487045018755382531 -0.73763225174418856067 -0.59592744652562557039 -0.68428030431414088586 -0.11021096957450790543 0.057713871864167050341 -0.43682136832189077946 -0.45468991678570069848 -0.5600019210962541294 0.4338348716435376784 0.18784782951471021284 0.16390991238897836824 0.026460566294624537909 -0.50639847474406551875 0.59350965311360204257 1.2277850309916737981 0.68762727995799799441 0.23614639068531079191 -0.21913137904605714534 0.4194821327751649398;-0.40297564189828821712 -0.13817090324611872032 0.25878149448363030327 0.30187193375266274664 0.12979965973099347187 -0.1043186054858100259 0.11682431334032004899 0.17470435357623145811 0.33831871240366523379 0.75432629475265333685 -0.17834133933277346307 -0.11985594461892815077 -0.043215585551572531509 0.26725465458753455694 0.38206141203435722842 -0.21036477456534322106 -0.21076058050543777789 0.00083471864308107832434 0.17202874958328168153 0.055696073247000786599 -0.21387839273035691434 0.024703369827330425718 0.036262627168138460154 0.2434285543507825611 -0.23009315425524348719;0.044183882075780757381 -0.14613850577423054267 -0.079187548282941500055 0.038821232502941040166 -0.044441777194086415359 -0.24024193798602924699 -0.11917056121410321556 0.2970456268659567578 -0.076988411001116793808 -0.49374762802301341846 0.28566231280690762562 0.27170918621362999401 0.38605208862136158876 -0.3161970514174697322 0.31745435455778370226 1.0746333750135739216 0.62597220804437136987 0.051815013487197483788 -0.70548950970056822918 0.33023572693658675981 1.6438614894214109707 0.60254290309305480466 -0.30616303475494838215 -1.1010264275952754698 -0.14107179675862804857;-0.086362222925934331585 -0.08700516224796098208 -0.036520991659682915109 0.022560412976123066231 0.10378815502085990408 -0.23590675988289561138 -0.17615949975985928377 -0.0504155630129186072 0.12487460076606624049 0.43556069496533783569 -0.23552965187423896554 -0.10019775162653057898 0.036955440033897446472 0.11716255025089100661 0.40972156631822531647 -0.12763368898980853583 -0.08175452206256851595 -0.026963621630967025272 0.11776709937212588575 0.28390382020732213286 -0.14614392157078992529 -0.12744433827001955262 -0.036722979600189893656 0.074806608700288337865 0.21198506961204846566;-0.094478548887008406698 0.43938179182474579321 0.33240377427663436727 0.29695687089751132692 -0.30484818945056124662 -0.17397787896862762502 0.21094278879417810435 -0.0066345599187528948859 -0.094360838409365280222 0.0051567840431419563474 -0.07236652627622881806 -0.15346382414941753258 -0.24758130295118865871 -0.28056819061763010881 0.58181058640231642087 -0.27106301481741940096 -0.13730681263120714242 -0.32008769861851826821 -0.29878366582289966891 0.60088266274265511591 -0.0848482990152336497 -0.33308864186904452165 -0.33006466232540981887 -0.30972803993102232534 0.49673302241170658178;0.047498873600204820355 0.23551351770268427743 0.22315661214481896657 0.16114943253491223474 -0.10642996921140958355 0.28787455387944876906 0.36695904222074082757 0.38315294100509106334 0.15547997105014871311 0.29668985720546048324 0.038674348986948249574 0.10676837861789001405 -0.035415463462925865501 0.14739113598100303526 0.4022109964364655732 -0.17818925656511216959 -0.29271045730804479135 -0.15847231173249146097 -0.20041075478386385922 0.58398350205675686464 -0.46768212010616616592 -0.3256824707352808379 -0.51207786139910504986 -0.46463074893048117442 0.71929787606672146438;-0.0065963378568200600749 0.21782594039189626112 0.27067892908591895118 0.26265244450491453954 0.21013781645899967665 -0.078558773065160819593 0.017445546332294257358 -0.0030099119046855318804 0.0045705437677263337226 0.22288024183195742634 -0.26878002371224041234 -0.22710731175971402007 -0.26110171131580239834 -0.099069111539389492771 0.37833202489701883708 -0.42797435803763766993 -0.36043146452056057383 -0.27510209622766201853 -0.14291275437077757826 0.40483401748016356603 -0.47311744659896687315 -0.32248627568026105861 -0.28430358768829394611 -0.087976009117786052594 0.36715948936627801347];

% Layer 2
b2 = [0.15715808043147075357;-0.41558757920015448883;-0.60451708950764582173;0.23430412380809029216;0.043317445062515461118;0.5501551971478354508;0.078234077748557159793;-0.12036503365118839115;0.4483477942577773212;-0.020889849954790193354];
LW2_1 = [-0.026965469722882041276 -0.16252112215172295762 0.29988743670895245952 -0.13132316929238793679 0.016623735289779645319 -0.49275125363941285617 -0.075291153708995625649 0.17754623236314620582 -0.11597437023678712487 -0.039149440957104285344;-1.5605315289959444947 -0.17164210573327659537 -0.73569282045868533704 -0.47194314006789345184 0.60051423830933770009 -0.097337435101618338673 0.4339331265690875572 -0.24769041320691859154 0.48924287855371456635 0.16950865025829275901;-0.17823118781089877793 -0.09434726817219560302 0.20649174983040016751 0.041426568708771302485 -0.56059341561180553448 -0.36884503749647840065 1.0621370436913855073 0.35956924044588634004 0.43891598837708922787 -0.12581620905829435375;0.21983848424595453519 0.14054086196045761925 -0.040745982270913957968 0.18344829184863400973 -0.10741722127770213235 -0.42032987638715507694 0.21302344117328964046 0.72034971532010672046 -0.29890906110779719151 -0.18627329154085817131;-0.080456767170241083598 -0.057689327597904425937 0.41398611772180327062 -0.26235708929604728556 -0.38615039266453393685 0.35565770412167385661 -0.85200031075931259572 -0.059770267108824208513 -0.21533832832815349989 0.51725834340236387376;0.35806941975183204097 0.29792334569006062583 0.35607011840685304227 -0.1697935128494275081 0.32026389624935169831 -0.50530756767296125531 0.26024761440677435242 0.35400030896752393561 -0.54499554414412698655 -0.94770442192917192514;-0.28057782022294902591 0.49112673417118241082 0.12475183355308182287 0.54751413260250247905 0.76362506211673508716 -0.43641025109225517475 0.54072171035330407474 -0.44595861975311401615 -0.13824053530733779183 -0.43152785954402222979;-0.10870491822704579643 -0.044000723843621893094 -0.0777792654611974138 0.084121459572788812031 0.66093756527630598274 -0.68229336154198205744 0.86169902738709491796 0.022274247003843491988 -0.49482405582591543203 0.096540802658526270186;-0.30480047210571836747 -0.49095382671206577729 0.13438777578000890567 0.088672983628004034551 0.82657834592898338233 -0.28919309658964709175 1.0748855749695160888 -0.36057953038692680536 0.44203230089795830793 -0.14195689291118340769;0.16149946088976008252 -0.084780143368938201687 -0.18829551331961708049 -0.0096922254771607506407 -0.079302533977548508859 0.099249746385531772974 -0.45082356426721043041 0.22088184593389140198 0.067042139980307766112 -0.26685800022729611047];

% Layer 3
b3 = [0.27079639454566911683;0.020438297951719867213;0.24949145823082585771;-0.38205945261286800019;0.088585484410064557759;-0.10091098629226312455;0.33882074203237694254;-0.20054937514521414821;0.012265827587038223567;0.013635083502847382755];
LW3_2 = [-0.076632852459547359802 -0.88659751233792738478 -0.86990886480536666614 -0.10602160298184121201 -0.42693150142189378871 -0.021402772978073886234 -0.11798055121722321459 -0.44083812873544975242 0.6660805795347520819 0.44561833430947356272;-0.11333608386585238004 -0.064811365521730265882 0.54470759221142450723 -0.13004315478623135194 0.20468895666840225545 -0.18033141929648749402 -0.26067765462560710255 -0.12384188329273114471 -0.11361374988351763404 -0.18740999832956953264;0.24047996027531778895 -0.46280342686431419352 -0.26165900204140146723 -0.11245516172318943682 0.019248609611914435646 0.36563279863340508724 0.19447625124278736242 0.19399140979108528415 -0.21546926521525422427 0.24111913368040133188;-0.33393234171046276559 0.40728722887273000053 0.26632980737348294076 0.19172462664142642108 -0.47321324290952654357 -0.29512489520344825644 0.16035976751401675999 0.54489780835859780161 -0.11949496167492891507 0.44397969130756564926;0.10484870159767115116 0.008945455784520710274 0.2994465075216142802 0.17700883084236704312 0.072797424653788217475 -0.042781558500421007496 0.047274524117234505149 0.30459632851629075967 0.1357955491509588164 -0.13559567441555933631;-0.069412763265428403803 0.062318612229540736036 -0.20217893373993051087 -0.041819633683167496685 0.13058108408070295825 -0.029252949442665286683 -0.065284603815625993906 -0.10324308527841701 -0.044455102466273550832 0.13308073443785828349;-0.29213658140871173741 -0.21232321135873249984 1.1977358386931091783 -0.68858667962430730736 -0.29287903734168002634 0.047291841577013132847 -0.60332903941720672503 0.019402054176250682627 -0.088691777493482990002 -0.38745451660208934941;0.029386463523155253313 -0.25570233245418705348 0.54252907399695948776 0.23793667532520137997 0.01528257196756277643 0.15794061309613541266 -0.70776504041420829072 -0.62265970685573823751 -0.016579236300275076305 0.086086058284947003516;0.03575285184915816955 0.079143804983871773873 0.23291708411430817049 0.1677106059576436714 -0.083255381334737282861 -0.1471335194209177355 -0.0568489830705570659 0.1398161249570895881 -0.092457757018127154081 -0.041295906314420476046;0.017154840809072344904 0.061703163439906789922 0.15855739160784063091 0.069113890592011756331 -0.033815924026766426558 -0.10197191805142624688 0.01578135992969541268 0.12380390412515630827 -0.055171670261350398701 -0.055457160232061139538];

% Layer 4
b4 = -0.0010123254167818574074;
LW4_3 = [1.1222080452665175176 -0.40368157043418967378 0.43259642634782469184 0.39946587006041706092 -0.40572557448118329315 0.22333335257042788435 -1.2502565900143101096 0.3995234251311421958 -0.38165795925957407553 -0.25956507785934668231];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.526962317787562;
y1_step1.xoffset = 0.204652423903759;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
