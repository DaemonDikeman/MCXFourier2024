function [y1] = Forward_H_0p05(x1)
%FORWARD_H_0P05 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 09-Apr-2020 00:52:38.
% 
% [y1] = Forward_H_0p05(x1) takes these arguments:
%   x = 2xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0.200000002980232];
x1_step1.gain = [4;0.294117647187726];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.5473895868676010856;3.7201278191736162348;-2.3996643424777652776;-1.8083263982868282849;0.28897530521011643989;0.10367964240051646962;-1.1084727779573559925;1.8749409616917949162;-3.7980041075158554875;-4.5687252290325561788];
IW1_1 = [0.27532052517268490455 3.5248173464282790412;-1.5893797692882298822 -3.3719756560431202175;2.085588879826957065 3.2926135747991351899;1.8032138491404696712 2.1154300913439461063;-1.1730357305097531828 2.2289751162096411718;0.60401720168799044597 1.9349909322324714278;-1.5796009531376573598 -0.84554902480334215298;0.094831023642465067658 3.4554576002482475516;-0.010317304822803689129 -3.7522984651211288565;-4.0555944662962737368 -0.068489772446011593088];

% Layer 2
b2 = [1.7888033697595315807;-1.2962988819205392144;0.87819469730245425243;0.41085177123420224543;-0.43739895500969833142;0.22835596737249022614;-0.6114368345370166935;0.84777815266285716511;1.1183193532625790301;1.719105790086921326];
LW2_1 = [-0.60359622051955852395 -0.42800643933458215606 0.70481059498054821066 0.72146676144045507328 -0.87321733358266706571 -0.38157669369223301548 -0.6697654708517367661 0.26956097947381535418 0.13027307349792136004 -1.9826252074876733467;0.32301500638516567054 0.18204098158496279103 -0.49317004801233232936 -0.46605326345054187698 -0.10723805467229227673 0.17682294775365411943 -0.095325299562479801074 0.20059519387175225869 -0.62037394858062022696 -0.28258654803893212826;-0.12961474325000041374 -0.83732783840234004114 -0.82606085913448912272 -0.0062221205725810392606 0.0072319584964442903269 0.32901345670054699122 0.44494171529651838082 0.11557522701930672548 0.71011035149284995605 0.3392469333319889091;0.060464438471046974555 1.057068265813308594 0.10136264797698545104 1.0071225246671473563 -0.44279596355486267045 -0.86610468550873065396 -0.78194640585960029089 -0.11778700737079500493 -0.45561468639640195777 -0.27729016919578103328;-0.76025733816859897285 0.11137437901278451902 -0.61022288709741911994 0.49562298399113724479 -0.12706899540747398913 0.081336166349250546559 -0.20821816419018671085 -0.39660301854369145458 1.1088064244371869105 -0.038990599807553982803;0.64656535121419900225 0.68369295565126897429 0.56598268286092723311 0.88171829654959976708 0.24405762739954894869 0.099761601729719553977 -0.72991707428432528459 -0.14319415198797205702 -0.15794188383910165441 0.38471338993813880558;-0.19016078567682148659 -1.0060078653295219109 -0.60132143485393307891 0.38015248493551423437 0.51680161707044214303 0.47228448309478149314 1.2885031070317194413 -0.60644368940103721144 0.49110426036828591645 -0.041414718767860528303;-0.076553220906030963744 0.97576477949598328099 -0.48818922970818984242 0.59175227304453636989 0.19724727998389735006 -0.65050900083852436495 -0.75563816899684743689 -0.5702881242608961454 -0.47430591132074073624 -0.63529180506833748954;0.26762203189487898669 -0.031799053144680046457 -0.31562242712137011935 0.21570195697551369785 -0.094829621294786170527 0.67754241816952187616 0.22646644232942564345 0.51249436426004546519 0.44882059722791334266 1.0911587210044810803;0.38347664882186283108 -0.36985212266959061056 -0.70690149833399174018 0.23778786611298743936 0.38221192293869060697 -0.43669510893605600899 0.84036427636088784077 -0.57542062505095969982 -0.23549538989118512511 0.31707550605237788677];

% Layer 3
b3 = [-1.6390029459118020672;1.3350103325152178346;-0.95347240376611741564;0.46958974782179102592;-0.11920032842649135041;-0.24223627805932976265;-0.72496813085216016415;0.87721560746982618628;-1.6160123884853343501;-1.9705318950046588622];
LW3_2 = [0.94854900420805610128 0.5316544970502713463 -0.66084865156374905659 0.36772769143469485886 -0.16378534687011436777 0.43111269867044549331 0.74129108266760446178 0.13193757568287883819 0.95454186247432559753 0.69812268657734199984;-0.61465247761775010371 1.2184964928953072594 0.41789079832168363193 -0.018984084338014635407 -0.97834226625606546257 -0.20907240027391651993 -0.58090057412308515605 0.61820734484068950998 -0.21793594431201540607 -0.19017902596596569786;0.98700530286338605812 0.14371698186590767254 0.40728464338298708824 1.4798454394630440323 0.79802998996327412229 0.32921140340262450286 -0.35867431009446443246 -0.53187192135545213745 0.49924085583192445714 0.12455478352552225296;-0.62323578318740002757 -0.72890680185670975177 -0.91484189407664029403 0.4009484504821644868 -0.72167989624761264 -0.32137836048258061616 0.003114629038104757032 -0.18313206117877425805 0.6220067944051558273 -0.56285377231089350758;-0.01889712859153785951 -0.34364026932139013493 -0.41000975491161945063 0.76795320569719527359 -0.31474685924769191248 -1.0086558703803292225 0.7436961092942194762 -0.47295508326300755853 -0.24050504391577323671 0.16368182381040724538;-1.4581079663497462651 0.006564932133767533394 0.50489736600111334575 -0.069828576918097295945 -0.98170146898263399571 -0.31334108347356365298 -0.70790252347654769594 -1.0978166001205422742 0.08177286845695651285 -0.94461952275986982297;-0.99033244355492444644 0.24192464522444828701 -0.29915734325295895157 0.69241665432388688206 0.50698347255253473076 0.55544484123426229871 0.75326883519935117217 -0.73640535175792942724 -0.082515684988852547321 0.0019182131047628034597;0.21097441081689585762 0.58703071610010715276 1.1377096265309980527 -0.014887601419435899514 -0.086674910547520050974 0.26391395321355454184 1.0049903960216779453 -0.70658021144844052053 -0.87230253862383366759 0.7208155448412398858;-0.027556819465116736551 0.90172755903087553619 -0.39743170741521033351 -0.054116886997155631833 0.35511546872878491099 -0.53209131622499694636 -0.012160058358544549584 0.67030861731350066535 -0.58301303563360085125 -0.090488406560503095721;-1.3077219116750100625 -0.65986889239700763365 -0.054391667998941108098 -0.60713258310329110135 -0.064148918537763055525 -0.43304765268012163082 -0.63141807082420153829 0.2770662146704899742 0.025896829625302007771 0.60138177362754174915];

% Layer 4
b4 = 0.81291590693258686251;
LW4_3 = [0.58497631475795930367 1.280302996050318276 -0.96062804360759301847 -0.60877301788642990132 0.92611955737461415517 1.3124847158560675187 0.39989041638473826756 -0.73618110521477575503 -1.0715399986451705772 0.54337086668452683202];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 2.28132335473165;
y1_step1.xoffset = 0.0187860038131475;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = repmat(b4,1,Q) + LW4_3*a3;

% Output 1
y1 = mapminmax_reverse(a4,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
