function [y1] = Forward_H_0p2(x1)
%FORWARD_H_0P2 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 09-Apr-2020 00:56:38.
% 
% [y1] = Forward_H_0p2(x1) takes these arguments:
%   x = 2xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0.200000002980232];
x1_step1.gain = [4;0.294117647187726];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.0535927251762080559;2.7577646638944619539;2.0433461029087034433;-0.71725424969735518399;-0.4195775508473719162;0.16131645061120275519;1.3106493431403738459;1.5647549041376234147;3.3622654866854708722;3.4076208505058112053];
IW1_1 = [-0.97310076366909714629 4.0973305738592404879;-0.81230057439028580113 -3.5085040960842794888;-1.3488314849470321999 2.9488467315221287279;2.1096884603971206573 -3.2244567247951834155;-0.94911634284807055995 -1.9985214385159022488;2.8850002835883010732 -2.914350871390150477;2.1750532329689318267 -2.6021707191376970414;1.9932857337359395355 0.78759255834725694356;2.4252273452493127159 -2.351276838876993569;0.10594408048375282549 3.7766308430781374561];

% Layer 2
b2 = [1.4909081151028575896;1.6269939770676180579;1.4531729077917590054;-0.0025166035471993154424;-0.16836600805863008445;0.020676044722448355673;-0.65747862305353033108;1.0682047636063944918;-1.3704133389911306029;-1.8266255253071599363];
LW2_1 = [-0.55609984079968022286 -0.41346448092318377476 -0.50278574826341682069 0.32344719812169608897 -0.2039473454887042736 0.0058579860806396710782 0.10218040438608433362 0.2563719495800464987 0.38334551101756714209 -0.26490983317965627331;-0.18453093178881443959 0.53315229844133815718 0.63373124954508941453 0.11197741459894380855 -0.23497556604056804574 0.82283236276935589615 0.65107449763594948955 -0.030084817633311323332 0.071909479250624103175 -0.52346794759877257608;0.14784882939878035701 -0.19104894325519794496 -0.1362949474141721129 -0.17421085190860743919 0.62585151092858182231 -0.018975951600381402162 -0.56630402800392842799 -0.18617524713894778587 -0.37506536424502961991 1.0070288087412762046;-0.93807236673851557285 -0.42611844884390243093 0.68208666561298247899 0.018167988421224204321 -0.30097291117695867957 -0.31758323745705097085 -0.37792454423688737197 0.47236981740556993614 -0.5139021041584137528 1.1031341939663235063;0.10221944802773612337 -0.0024828368082787160773 0.014681374981330631846 -0.78259292051565754189 0.34777726099526046211 0.39620689431970479433 0.19918738219948947665 0.64365080559661125292 1.0123462271602685636 1.672603253299149717;-0.056837088658925394302 -0.0068686391003404496589 1.0264594128166300013 -0.33280959202903320771 0.47597436891132721692 -0.61622355934966943636 0.74902175030174145132 0.36095527142438227353 -0.23203347652683489755 -0.4294708449292822805;-0.82085134496430789408 0.49378152117947138322 -0.47794857964986059429 0.092004625852697988209 0.27877712396594284128 -0.3155484938416255325 0.4630222413607629206 -0.19274518038016238974 0.30337846091318004804 -0.17849758468450738214;0.26958992400766451647 0.47233091077831496074 -0.34386355536189106008 -0.73113419213330532731 0.31975071815824601673 0.61404210480273113681 0.52926071884417102975 -0.030044889257294992574 -0.88517434438249675832 1.2339286938017777207;-0.32862031487456833112 -0.74124972073525874361 0.39071418800438817431 -0.44190247230875973061 -0.31688169033698682098 -0.38920296437081380869 -0.40550895619459009778 -1.3196420175414673714 -0.052961397743627389167 -0.31007082275128394766;-0.31151137897323871728 -0.26759991514468856044 0.087216961334592724153 -0.95987670790477119809 -0.35700482752616169435 -0.26662172759557034585 -0.8241766948190845099 0.81125670406061756168 0.078535975182584066845 0.094511187072667632303];

% Layer 3
b3 = [-1.8932141981927375074;1.5427893050319949619;-1.0043151180435574421;-0.67746614214067291115;-0.20259229788114604953;0.31377670120855905012;-0.62888067941086478463;1.0208107634366136995;1.4338194155525192386;-1.5907347890562137938];
LW3_2 = [0.17301272185522947877 0.092733256369168071132 -1.2862763279335476252 -0.64552453751698213313 0.55827793033545158874 0.2074660384674903435 -0.86066770555595306647 -0.37987702089941483008 -0.69636134909506086643 0.025665757340022465893;-0.097875118385857509673 -0.052957086791867433173 0.86446578438092902541 1.0531375198261445636 0.97996611983205050844 0.094327018764783859828 0.23444298231729718274 -0.33205097848162773433 -0.15057333347069837282 -0.15973123462095803471;0.69632652086699198257 -0.78038351964418983808 0.012006000486856941226 0.86336374448695885064 0.26532780712350811925 -0.08757106652972868055 0.78455942694450497843 -0.18090792051758833314 0.65021208741560276856 -0.4547614590624751707;0.53448059421427474014 0.32487403510295703724 0.0081520919773601079744 -0.42219708643290554395 1.1384582772485640767 -0.34433706369430910899 0.75442937414431676668 -0.91931445463755911973 -0.12454838690358729925 -0.40735073094797547011;0.04622018165039240567 -1.0468425549986932754 0.38097382805257967719 0.79731470978430030172 -0.54425217731007358157 0.27370763735615361023 -0.30979034805267852137 0.43864004764877484455 -0.71687623719409221401 -0.5247198843243878752;0.8392624087555856649 0.6814900806019648094 -0.83755283425929549779 -0.30407304058182377249 0.66233493496363771147 0.78853557701937737612 -0.13207950920020589125 0.23190964562065266574 -0.28609906155985509457 -0.022889916003448917969;-0.25910383236008455166 0.25123292669964858437 0.13059687811929598933 -0.68680713941040727466 0.4517231586611035743 -0.44064179862541946742 0.47554363213464012627 0.71574044549909732194 0.26685949981984535828 0.35272550893561632757;0.27371696463112749065 0.43239698286431565988 0.44012767909977934533 0.68377840469497674913 0.63001248873717918819 -0.56806825517417058879 0.12764142735774589021 -0.29538644768298621957 0.23753290722891587383 0.85465414973715114755;0.21231800828574412532 0.75584424061212651669 -0.27264421615196265947 0.049066879962648808633 -0.8503945130694612331 -0.29375439205557990485 0.24218267410259511352 -0.71792492645365224568 0.4690708509543889404 0.93028301386769129966;-0.99572802214186040271 -0.24614404227483266396 -0.28150061575737506114 0.97828931821856512929 0.51504058303872157776 0.33142548910544411545 0.030407074261777630036 -0.77669939339788784949 0.17188068783916923832 -0.34543168818670627607];

% Layer 4
b4 = 0.40606094246144269766;
LW4_3 = [0.59601357148178601975 0.5336806193046925717 -0.388140478235306563 -0.38800204222606438087 0.87391128313800126026 -1.0596115769396312611 0.74548296775304612183 0.20575487947534049082 0.12758290874771888168 0.26380734335479277819];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 3.19607861043427;
y1_step1.xoffset = 0.00119224935770035;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = repmat(b4,1,Q) + LW4_3*a3;

% Output 1
y1 = mapminmax_reverse(a4,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
